<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<meta name="description" content="An app for visualization of FRD and COV trees using labelled bracket notation." />
	<link rel="canonical" href="http://mshang.ca/syntree" />
	<title>OpEx FRD and COV Tree Generator</title>

	<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-25344866-1']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	</script>
</head>


<body>
	<a href="https://sites.google.com/a/whirlpool.com/opex-lean-training-info/opex/opex-education"><img style="width:200px;height:80px; position: absolute; align=middle; border: 0" src="https://www.lucidchart.com/publicSegments/view/aa898624-79f5-45ef-a2ac-9d03ef8f36eb/image.png" alt="OpEx Education"></a>
	<div id="accordion">
				
		<h3><a href="#">OpEx FRD and COV Tree Generator</a></h3><div style="text-align:left">
			<textarea id="i" rows="4">[1 [1 [-1 1] [1 2]]]</textarea>
			
		</div>
		
		<h3><a href="#">Customize</a></h3><div>
			<table>
				<col width="1*">
				<col width="1*">
				<tr>
					<td colspan="2" align="center"><div id="font-style-radio" class="nobr">
						<input type="radio" name="font-style" id="serif" value="serif" class="redraw" /><label for="serif">Serif</label>
						<input type="radio" name="font-style" id="sans-serif" value="sans-serif" class="redraw" checked /><label for="sans-serif">Sans-Serif</label>
						<input type="radio" name="font-style" id="monospace" value="monospace" class="redraw" /><label for="monospace">Monospace</label>
					</div></td>
				</tr>
				<tr>
					<td align="center">Terminals:</td>
					<td align="center">Non-terminals:</td>
				</tr>
				<tr>
					<td align="center"><div id="term-font-check" class="nobr">
						<input type="checkbox" id="term-bold" class="redraw" /><label for="term-bold">Bold</label>
						<input type="checkbox" id="term-ital" class="redraw" /><label for="term-ital">Italic</label>
					</span></td>
					<td align="center"><div id="nonterm-font-check" class="nobr">
						<input type="checkbox" id="nonterm-bold" class="redraw" /><label for="nonterm-bold">Bold</label>
						<input type="checkbox" id="nonterm-ital" class="redraw" /><label for="nonterm-ital">Italic</label>
					</span></td>
				</tr>
				<tr>
					<td align="left">Font size:</td>
					<td><div id="font-size-slider"></div></td>
				</tr>
				<tr>
					<td align="left">Height:</td>
					<td><div id="vert-space-slider"></div></td>
				</tr>
				<tr>
					<td align="left">Width:</td>
					<td><div id="hor-space-slider"></div></td>
				</tr>
				<tr>
					<td align="center" colspan="2"><div class="nobr">
						<input type="checkbox" id="color-check" class="redraw" checked /><label for="color-check">Color</label>
						<input type="checkbox" id="term-lines" class="redraw" checked /><label for="term-lines">Terminal lines</label>
						<a href="#" id="make-link">Link</a>
					</div></td>
				</tr>
			</table>
		</div>
	
		<h3><a href="#">Help</a></h3><div class="help">
			<p>This tool is built over the app</p>
			(C) 2011 by <a href="http://mshang.ca/">Miles Shang</a>, see <a href="LICENSE.txt">license</a>.
			<p>It uses a labelled bracket notation to build the tree as you type and will attempt to close any brackets that you may be missing. It is used with the <a href="https://docs.google.com/spreadsheets/d/1rJOv0JYSWh2ZOKKy3S6ylS1pJ0nE4JtlI0Em6PAWi7Y/edit?usp=sharing">OpEx FRD and COV Maker</a> Apps Script for Google Spreadshhet which generates the tree in brackets notation. </p>
			<p>Copy the image address by right-clicking on it and selecting "Copy image address" and use the Apps Script to insert the visualization to your spreadsheet.</p>
			<h3>Examples</h3>
			<a class="example" href="?i=[1 [1 [-1 1] [1 2]]]">Really Simple FRD with 1 Factor</a><br />
			<a class="example" href="?i=[1 [1 [-1 [-1 [-1 [1 [1 [1 [1  1][2  2]]]]][1 [2 [2 [2 [3  3][4  4]]]]]][1 [-1 [3 [3 [3 [5  5][6  6]]]]][1 [4 [4 [4 [7  7][8  8]]]]]]][1 [-1 [-1 [5 [5 [5 [9  9][10  10]]]]][1 [6 [6 [6 [11  11][12  12]]]]]][1 [-1 [7 [7 [7 [13  13][14  14]]]]][1 [8 [8 [8 [15  15][16  16]]]]]]]]]">3 Factors Full Fatorial </a><br />
			<a class="example" href="?i=[1 [1 [-1 [-1 [-1 [X [1 [1 [1 [1  1][2  2]]]]]][1 [X [2 [2 [2 [3  3][4  4]]]]]]][1 [-1 [X [3 [3 [3 [5  5][6  6]]]]]][1 [X [4 [4 [4 [7  7][8  8]]]]]]]][1 [-1 [-1 [X [5 [5 [5 [9  9][10  10]]]]]][1 [X [6 [6 [6 [11  11][12  12]]]]]]][1 [-1 [X [7 [7 [7 [13  13][14  14]]]]]][1 [X [8 [8 [8 [15  15][16  16]]]]]]]]]]">4 Factors Factorial (p=1 Fraction) and Repetition</a><br />
			<a class="example" href="?i=[1 [1 [-1 [-1 [1 [-1 [X [1 [1 [1 [1  1][2  2]]]]]][1 [X [2 [2 [2 [3  3][4  4]]]]]]]][1 [2 [-1 [X [3 [3 [3 [5  5][6  6]]]]]][1 [X [4 [4 [4 [7  7][8  8]]]]]]]]][1 [-1 [3 [-1 [X [5 [5 [5 [9  9][10  10]]]]]][1 [X [6 [6 [6 [11  11][12  12]]]]]]]][1 [4 [-1 [X [7 [7 [7 [13  13][14  14]]]]]][1 [X [8 [8 [8 [15  15][16  16]]]]]]]]]]]">WP/SP 4 Factors Factorial (p=1 Fraction)</a><br />
		</div>
	</div>
	<br />

	<div id="image-goes-here"><font color="red"></font></div>
	<div id="text-goes-here" style="color:white;width:100%;word-wrap:break-word"></div>


<style type="text/css">
body { font-size: small !important; font-family: sans-serif; margin: 20px; background-color: #ffffff}
#accordion { margin: 0px auto; width: 500px; text-align: center; }
table { margin: 0px auto; }
//.ui-widget { font-size:small !important; }
td {font-size:small !important;}
textarea {resize: vertical; width: 100%}
a.example { text-decoration: none; color: #4183C4!important; }
.help {text-align: left;}
#image-goes-here { text-align: center; }
img { border: 1px solid #bbbbbb; }
.nobr { white-space: nowrap; }
</style>

<link type="text/css" href="css/cupertino/jquery-ui-1.8.18.custom.css" rel="stylesheet" />	
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
<script type="text/javascript" src="js/base64.js"></script>
<script type="text/javascript" src="js/canvas2image.js"></script>
<script type="text/javascript" src="js/syntree.js"></script>
<script type="text/javascript">

function handler(font_size_update, vert_space_update, hor_space_update) {
try {
	// Initialize the various options.
	var term_font = "";
	var nonterm_font = "";
	var color = false;
	var term_lines = false;
	if (document.getElementById("term-ital").checked)
		term_font = term_font + "italic ";
	if (document.getElementById("term-bold").checked)
		term_font = term_font + "bold ";
	if (document.getElementById("nonterm-ital").checked)
		nonterm_font = nonterm_font + "italic ";
	if (document.getElementById("nonterm-bold").checked)
		nonterm_font = nonterm_font + "bold ";
	if (document.getElementById("color-check").checked)
		color = true;
	if (document.getElementById("term-lines").checked)
		term_lines = true;
	font_size = $("#font-size-slider").slider( "option", "value" );
	vert_space = $("#vert-space-slider").slider( "option", "value" );
	hor_space = $("#hor-space-slider").slider( "option", "value" );
	if (font_size_update) font_size = font_size_update;
	if (vert_space_update) vert_space = vert_space_update;
	if (hor_space_update) hor_space = hor_space_update;
	term_font = term_font + font_size + "pt ";
	nonterm_font = nonterm_font + font_size + "pt ";
	term_font = term_font + $('input:radio[name=font-style]:checked').val();
	nonterm_font = nonterm_font + $('input:radio[name=font-style]:checked').val();
	
	// Get the string.
	var str = document.getElementById("i").value;
	
	/*$("#image-goes-here").text(str + ", " + font_size + ", " + 
		term_font + ", " + nonterm_font + ", " + vert_space + ", " + hor_space);*/
	
	var img = go(str, font_size, term_font, nonterm_font, vert_space, hor_space, color, term_lines, true);
	$("#image-goes-here").empty();
	$("#image-goes-here").append(img);
	img = go(str, font_size, term_font, nonterm_font, vert_space, hor_space, color, term_lines, false);
	$("#text-goes-here").empty();
	$("#text-goes-here").append(img);
	
} catch (err) {
	if (debug) {
		throw(err);
	} else { 
		if (err == "canvas")
			$("#image-goes-here").text("Browser not supported.");
	}
} // try-catch
return false;
} // handler()

$(function() {
	// UI
	$("#make-link, #color-check, #term-lines").button();
	$("#font-size-slider").slider({value: 12, min: 8, max: 16, step: 1});
	$("#vert-space-slider").slider({value: 35, min: 35, max: 70, step: 5});
	$("#hor-space-slider").slider({value: 10, min: 10, max: 50, step: 5});
	$("#font-style-radio, #term-font-check, #nonterm-font-check").buttonset();
	$("#accordion").accordion({collapsible: true, icons: false, autoHeight: false});
	
	try {
		var qs = decodeURIComponent(window.location.search.slice(1));
		qs = qs.replace(/^i=/,"");
		qs = qs.replace(/\+/g," ");
		if (qs == "") throw "";
		document.getElementById("i").value = qs;
	} catch (err) {}
	
	handler();
	
	// Events
	$("#i").keypress(function() {handler(); return true;});
	$("#i").keyup(function() {handler(); return true;});
	$("#i").keydown(function() {handler(); return true;});
	$("#i").change(function() {handler(); return true;});
	$(".redraw").change(function() {return handler()});
	$("#make-link").click(function() {
		var loc = window.location.href;
		loc = loc.replace(window.location.search, "");
		
		window.prompt ("Link for this tree:", loc + "?i=" +
			encodeURIComponent(document.getElementById("i").value));
		return false;
	});
	$("#font-size-slider").bind("slide", function (event, ui) {
		handler(ui.value, null, null); return true;
	});
	$("#vert-space-slider").bind("slide", function (event, ui) {
		handler(null, ui.value, null); return true;
	});
	$("#hor-space-slider").bind("slide", function (event, ui) {
		handler(null, null, ui.value); return true;
	});
});
</script>

</body>
</html>